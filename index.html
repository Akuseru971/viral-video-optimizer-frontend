<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TikTok Viral Video Optimizer</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    h1 {
      font-size: 2.5em;
      color: #333;
      margin-bottom: 10px;
    }
    
    .subtitle {
      color: #666;
      font-size: 1.1em;
    }
    
    .credit-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 30px;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .credit-info {
      font-size: 1.2em;
    }
    
    .btn-buy-credits {
      background: white;
      color: #667eea;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.2s;
    }
    
    .btn-buy-credits:hover {
      transform: scale(1.05);
    }
    
    .form-group {
      margin-bottom: 25px;
    }
    
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
      font-size: 1.1em;
    }
    
    input[type="text"],
    select,
    textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 1em;
      transition: border-color 0.3s;
    }
    
    input[type="text"]:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #667eea;
    }
    
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn-generate {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 1.2em;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .btn-generate:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
    }
    
    .btn-generate:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .loading {
      text-align: center;
      padding: 20px;
      display: none;
    }
    
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .results {
      display: none;
      margin-top: 30px;
      padding: 30px;
      background: #f8f9fa;
      border-radius: 15px;
    }
    
    .results h2 {
      color: #333;
      margin-bottom: 20px;
      font-size: 1.8em;
    }
    
    .hashtags, .music {
      margin-bottom: 25px;
    }
    
    .hashtags h3, .music h3 {
      color: #667eea;
      margin-bottom: 15px;
      font-size: 1.3em;
    }
    
    .hashtag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .hashtag {
      background: white;
      padding: 8px 15px;
      border-radius: 20px;
      color: #667eea;
      font-weight: 500;
      border: 2px solid #667eea;
    }
    
    .music-track {
      background: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 10px;
      border-left: 4px solid #667eea;
    }
    
    .music-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }
    
    .music-artist {
      color: #666;
      font-size: 0.9em;
    }
    
    .virality-score {
      text-align: center;
      padding: 20px;
      background: white;
      border-radius: 15px;
      margin-top: 20px;
    }
    
    .score-value {
      font-size: 4em;
      font-weight: bold;
      color: #667eea;
    }
    
    .score-label {
      color: #666;
      margin-top: 10px;
    }

            /* Authentication Modal Styles */
            .auth-modal {
                          display: none;
                          position: fixed;
                          top: 0;
                          left: 0;
                          width: 100%;
                          height: 100%;
                          background: rgba(0, 0, 0, 0.7);
                          z-index: 1000;
                          justify-content: center;
                          align-items: center;
                      }

            .auth-modal.show {
                          display: flex;
                      }

            .auth-content {
                          background: white;
                          border-radius: 20px;
                          padding: 40px;
                          max-width: 400px;
                          width: 90%;
                          position: relative;
                      }

            .auth-tabs {
                          display: flex;
                          gap: 20px;
                          margin-bottom: 30px;
                      }

            .auth-tab {
                          flex: 1;
                          padding: 10px 20px;
                          background: #f0f0f0;
                          border: none;
                          border-radius: 10px;
                          cursor: pointer;
                          font-weight: 600;
                      }

            .auth-tab.active {
                          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                          color: white;
                      }

            .auth-form {
                          display: none;
                      }

            .auth-form.active {
                          display: block;
                      }

            .auth-input {
                          width: 100%;
                          padding: 15px;
                          margin-bottom: 15px;
                          border: 2px solid #e0e0e0;
                          border-radius: 10px;
                          font-size: 16px;
                          box-sizing: border-box;
                      }

            .auth-submit {
                          width: 100%;
                          padding: 15px;
                          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                          color: white;
                          border: none;
                          border-radius: 10px;
                          font-size: 16px;
                          font-weight: 600;
                          cursor: pointer;
                      }

            .user-info {
                          display: none;
                          align-items: center;
                          gap: 15px;
                      }

            .user-info.show {
                          display: flex;
                      }

            .logout-btn {
                          padding: 8px 16px;
                          background: #ff4444;
                          color: white;
                          border: none;
                          border-radius: 8px;
                          cursor: pointer;
                          font-size: 14px;
                      }

    /* Pricing Modal */
.pricing-modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(5px);
}

.pricing-modal-content {
    background: white;
    margin: 3% auto;
    padding: 50px 40px;
    border-radius: 25px;
    max-width: 1000px;
    position: relative;
    box-shadow: 0 30px 80px rgba(102, 126, 234, 0.3);
}

.pricing-modal-content h2 {
    text-align: center;
    font-size: 2.5em;
    margin-bottom: 40px;
    color: #333;
}

.pricing-close {
    position: absolute;
    right: 25px;
    top: 25px;
    font-size: 35px;
    font-weight: bold;
    color: #999;
    cursor: pointer;
    transition: color 0.3s;
}

.pricing-close:hover {
    color: #667eea;
}

.pricing-plans {
    display: flex;
    gap: 25px;
    margin-top: 30px;
}

.plan-card {
    flex: 1;
    padding: 40px 30px;
    border: 2px solid #e0e0e0;
    border-radius: 20px;
    text-align: center;
    position: relative;
    transition: transform 0.3s, box-shadow 0.3s;
}

.plan-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
}

.plan-card.featured {
    border-color: #667eea;
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
    transform: scale(1.05);
    box-shadow: 0 20px 50px rgba(102, 126, 234, 0.25);
}

.badge {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 5px 20px;
    border-radius: 20px;
    font-size: 0.8em;
    font-weight: bold;
}

.plan-card h3 {
    font-size: 1.8em;
    color: #333;
    margin-bottom: 20px;
}

.plan-price {
    font-size: 3em;
    font-weight: bold;
    color: #667eea;
    margin: 20px 0;
}

.plan-price span {
    font-size: 0.4em;
    color: #999;
}

.plan-card p {
    color: #666;
    font-size: 1.1em;
    margin-bottom: 25px;
}

.plan-card ul {
    list-style: none;
    padding: 0;
    margin: 25px 0;
    text-align: left;
}

.plan-card ul li {
    padding: 10px 0;
    color: #555;
    font-size: 0.95em;
}

.plan-card button {
    width: 100%;
    padding: 18px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1.1em;
    margin-top: 25px;
    transition: transform 0.2s, box-shadow 0.2s;
}

.plan-card button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
}

@media (max-width: 768px) {
    .pricing-plans {
        flex-direction: column;
    }
    
    .plan-card.featured {
        transform: scale(1);
    }
}
  </style>
  
    <!-- Firebase SDK -->
      <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
      <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
      <script>
                // Firebase configuration
                const firebaseConfig = {
                              apiKey: "AIzaSyClaxiy_YyFXzCHclP5jnxmYJkUTUDrtBU",
                              authDomain: "tiktok-viral-optimizer.firebaseapp.com",
                              projectId: "tiktok-viral-optimizer",
                              storageBucket: "tiktok-viral-optimizer.firebasestorage.app",
                              messagingSenderId: "282243849698",
                              appId: "1:282243849698:web:b9d15bd89f5decba4cadbb",
                              measurementId: "G-YDNTJTMW2Y"
                                        };
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);
                const auth = firebase.auth();
            </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>üé¨ TikTok Viral Assistant</h1>
      <p class="subtitle">Generate</p>
    </header>

    <div class="credit-banner">
      <div class="credit-info">
                    <!-- User Info & Auth Button -->
                    <div class="user-info" id="userInfo">
                                      <span id="userEmail"></span>
                                      <button class="logout-btn" onclick="handleLogout()">Logout</button>
                                  </div>
                    <button id="authBtn" class="auth-submit" onclick="showAuthModal()" style="display:none; margin-top:20px;">Sign In / Sign Up</button>
        üéüÔ∏è Credits: <strong id="creditCount">1</strong>
      </div>
      <button class="btn-buy-credits" id="buyCreditsBtn">üí≥ Buy More Credits</button>
    </div>

    <form id="videoForm">
      <div class="form-group">
        <label for="videoUrl">üîó Video URL TikTok</label>
        <input type="text" id="videoUrl" placeholder="https://www.tiktok.com/@username/video/123456" required>
      </div>

      <div class="form-group">
        <label for="platform">üì± Platform</label>
        <select id="platform">
          <option value="tiktok">TikTok</option>
          <option value="instagram">Instagram</option>
        </select>
      </div>

      <div class="form-group">
        <label for="videoDesc">üìù Description of the Video</label>
        <textarea id="videoDesc" placeholder="Describe the content of your videoo..." required></textarea>
      </div>

      <div class="form-group">
        <label for="niche">üéØ Niche / Category</label>
        <select id="niche">
          <option value="food">üçî Food & Cooking</option>
          <option value="beauty">üíÑ Beauty & Cosmetics</option>
          <option value="tech">üì± Tech & Gadgets</option>
          <option value="fashion">üëó Fashion & Style</option>
          <option value="fitness">üí™ Fitness & Sports</option>
          <option value="lifestyle">‚ú® Lifestyle</option>
          <option value="ecommerce">üõí General E-commerce</option>
        </select>
      </div>

      <button type="submit" class="btn-generate" id="generateBtn">
        ‚ú® Generate Recommendations (1 credit)
      </button>
    </form>

    <div class="loading" id="loading">
      <div class="spinner"></div>
      <p>Analyzing with AI...</p>
    </div>

    <div class="results" id="results">
      <h2>üìä Analysis Results</h2>
      
      <div class="hashtags">
        <h3>üî• Trending Hashtags</h3>
        <div class="hashtag-list" id="trendingHashtags"></div>
      </div>

      <div class="hashtags">
        <h3>üéØ Niche Hashtags</h3>
        <div class="hashtag-list" id="nicheHashtags"></div>
      </div>

      <div class="music">
        <h3>üéµ Music Recommendations</h3>
        <div id="musicTracks"></div>
      </div>

      <div class="virality-score">
        <div class="score-value" id="scoreValue">0</div>
        <div class="score-label">Virality Score</div>
      </div>
    </div>
  </div>

  <script>
    const API_URL = 'https://video-style-cloner-backend-production.up.railway.app/test';
    let credits = 1;

    const form = document.getElementById('videoForm');
    const loading = document.getElementById('loading');
    const results = document.getElementById('results');
    const generateBtn = document.getElementById('generateBtn');
    const creditCount = document.getElementById('creditCount');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      if (credits <= 0) {
        alert('‚ùå You have no more credits! Buy more to continue.');
        return;
      }

      const videoUrl = document.getElementById('videoUrl').value;
      const platform = document.getElementById('platform').value;
      const videoDesc = document.getElementById('videoDesc').value;
      const niche = document.getElementById('niche').value;

      // Afficher le loading
      form.style.display = 'none';
      loading.style.display = 'block';
      results.style.display = 'none';

      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            video_url: videoUrl,
            platform: platform
          })
        });

        const data = await response.json();

        if (data.success) {
          // D√©duire 1 cr√©dit
          credits--;
          creditCount.textContent = credits;

          // Afficher les r√©sultats
          displayResults(data.data);
        } else {
          throw new Error(data.error || 'Erreur inconnue');
        }
      } catch (error) {
        alert('‚ùå Erreur: ' + error.message);
      } finally {
        form.style.display = 'block';
        loading.style.display = 'none';
      }
    });

    function displayResults(data) {
      // Trending Hashtags
      const trendingContainer = document.getElementById('trendingHashtags');
      trendingContainer.innerHTML = '';
      if (data.trending_hashtags) {
        data.trending_hashtags.forEach(tag => {
          const span = document.createElement('span');
          span.className = 'hashtag';
          span.textContent = tag;
          trendingContainer.appendChild(span);
        });
      }

      // Niche Hashtags
      const nicheContainer = document.getElementById('nicheHashtags');
      nicheContainer.innerHTML = '';
      if (data.niche_hashtags) {
        data.niche_hashtags.forEach(tag => {
          const span = document.createElement('span');
          span.className = 'hashtag';
          span.textContent = tag;
          nicheContainer.appendChild(span);
        });
      }

      // Musique
      const musicContainer = document.getElementById('musicTracks');
      musicContainer.innerHTML = '';
      if (data.music_recommendations) {
        data.music_recommendations.forEach(track => {
          const div = document.createElement('div');
          div.className = 'music-track';
          div.innerHTML = `
            <div class="music-title">üéµ ${track.title}</div>
            <div class="music-artist">üë§ ${track.artist}</div>
          `;
          musicContainer.appendChild(div);
        });
      }

      // Virality Score
      const scoreElement = document.getElementById('scoreValue');
      if (data.virality_score) {
        scoreElement.textContent = data.virality_score;
      }

      // Afficher les r√©sultats
      results.style.display = 'block';
    }

    // Bouton acheter des cr√©dits
    document.getElementById('buyCreditsBtn').addEventListener('click', () => {
        document.getElementById('pricingModal').style.display = 'block';    });  </script>

      // Fermer le modal pricing
    document.addEventListener('DOMContentLoaded', () => {
        const modal = document.getElementById('pricingModal');
        const closeBtn = document.querySelector('.pricing-close');
        
        if (closeBtn) {
            closeBtn.addEventListener('click', () => {
                modal.style.display = 'none';
            });
        }
        
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
    });

      <!-- Authentication Modal -->
      <div id="authModal" class="auth-modal">
                <div class="auth-modal-content">
                              <span class="auth-close">&times;</span>

                              <!-- Sign Up Form -->
                              <div id="signupForm" class="auth-form">
                                                <h2>Sign Up</h2>
                                                <input type="email" id="signupEmail" placeholder="Email" required>
                                                <input type="password" id="signupPassword" placeholder="Password" required>
                                                <button id="signupBtn" class="auth-btn">Sign Up</button>
                                                <p class="auth-switch">Already have an account? <a href="#" id="showLogin">Login</a></p>
                                            </div>

                              <!-- Login Form -->
                              <div id="loginForm" class="auth-form" style="display:none;">
                                                <h2>Login</h2>
                                                <input type="email" id="loginEmail" placeholder="Email" required>
                                                <input type="password" id="loginPassword" placeholder="Password" required>
                                                <button id="loginBtn" class="auth-btn">Login</button>
                                                <p class="auth-switch">Don't have an account? <a href="#" id="showSignup">Sign Up</a></p>
                                            </div>
                          </div>
            </div>

      <!-- Authentication JavaScript -->
      <script>
                // Modal elements
                const authModal = document.getElementById('authModal');
                const authBtn = document.getElementById('authBtn');
                const authClose = document.querySelector('.auth-close');
                const signupForm = document.getElementById('signupForm');
                const loginForm = document.getElementById('loginForm');
                const showLogin = document.getElementById('showLogin');
                const showSignup = document.getElementById('showSignup');
                const userInfo = document.getElementById('userInfo');
                const userEmail = document.getElementById('userEmail');
                const logoutBtn = document.querySelector('.logout-btn');
                const creditCount = document.getElementById('creditCount');

                // Show/hide modal
                function showAuthModal() {
                              authModal.style.display = 'flex';
                          }

                function hideAuthModal() {
                              authModal.style.display = 'none';
                          }

                // Switch between forms
                showLogin.addEventListener('click', (e) => {
                              e.preventDefault();
                              signupForm.style.display = 'none';
                              loginForm.style.display = 'block';
                          });

                showSignup.addEventListener('click', (e) => {
                              e.preventDefault();
                              loginForm.style.display = 'none';
                              signupForm.style.display = 'block';
                          });

                // Modal controls
                authBtn.addEventListener('click', showAuthModal);
                authClose.addEventListener('click', hideAuthModal);
                window.addEventListener('click', (e) => {
                              if (e.target === authModal) hideAuthModal();
                                        });

                // Firebase Authentication
                // Sign Up
                document.getElementById('signupBtn').addEventListener('click', async () => {
                              const email = document.getElementById('signupEmail').value;
                              const password = document.getElementById('signupPassword').value;
                              try {
                                                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                                                console.log('User signed up:', userCredential.user);
                                                hideAuthModal();
                                            } catch (error) {
                                                alert('Sign up error: ' + error.message);
                                            }
                                        });

                // Login
                document.getElementById('loginBtn').addEventListener('click', async () => {
                              const email = document.getElementById('loginEmail').value;
                              const password = document.getElementById('loginPassword').value;
                              try {
                                                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                                                console.log('User logged in:', userCredential.user);
                                                hideAuthModal();
                                            } catch (error) {
                                                alert('Login error: ' + error.message);
                                            }
                                        });

                // Logout
                logoutBtn.addEventListener('click', async () => {
                              try {
                                                await auth.signOut();
                                                console.log('User logged out');
                                            } catch (error) {
                                                alert('Logout error: ' + error.message);
                                            }
                                        });

                // Auth state observer
                auth.onAuthStateChanged(async (user) => {
                              if (user) {
                                                // User is signed in
                                                userEmail.textContent = user.email;
                                                userInfo.style.display = 'flex';
                                                authBtn.style.display = 'none';
                                                // TODO: Fetch and display user credits from Firestore
                                                creditCount.textContent = '0'; // Placeholder
                                            } else {
                                                // User is signed out
                                                userInfo.style.display = 'none';
                                                authBtn.style.display = 'block';
                                            }
                          });
            </script>

      <!-- Pricing Modal -->
    <div id="pricingModal" class="pricing-modal">
        <div class="pricing-modal-content">
            <span class="pricing-close">&times;</span>
            <h2>üéØ Choose Your Plan</h2>
            <div class="pricing-plans">
                <div class="plan-card">
                    <h3>Starter</h3>
                    <div class="plan-price">4,99 ‚Ç¨</div>
                    <p>1000 Credits</p>
                    <ul>
                        <li>‚úì Analyse basique</li>
                        <li>‚úì Hashtags tendances</li>
                        <li>‚úì Support email</li>
                    </ul>
                    <button onclick="window.location.href='https://buy.stripe.com/test_4gM6oJ3V63tcdN7W50Jq00'">Choisir Starter</button>
                </div>
                <div class="plan-card featured">
                    <div class="badge">POPULAIRE</div>
                    <h3>Pro</h3>
                    <div class="plan-price">9,99 ‚Ç¨<span>/mois</span></div>
                    <p>2000 Credits/month</p>
                    <ul>
                        <li>‚úì Analyse avanc√©e</li>
                        <li>‚úì Hashtags premium</li>
                        <li>‚úì Musique IA</li>
                        <li>‚úì Support prioritaire</li>
                    </ul>
                    <button onclick="window.location.href='https://buy.stripe.com/test_fZU4gBaky77xb9J090Jq02'">Choisir Pro</button>
                </div>
                <div class="plan-card">
                    <h3>Business</h3>
                    <div class="plan-price">49,99 ‚Ç¨</div>
                    <p>15000 Credits</p>
                    <ul>
                        <li>‚úì Tout du Pro</li>
                        <li>‚úì API Access</li>
                        <li>‚úì Support d√©di√©</li>
                        <li>‚úì Analytiques avanc√©es</li>
                    </ul>
                    <button onclick="window.location.href='https://buy.stripe.com/test_28E8wRfESerz5Ppekt01Jq01'">Choisir Business</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

