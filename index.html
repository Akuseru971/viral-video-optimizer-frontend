<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TikTok Viral Video Optimizer</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
        body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: white;
            min-height: 100vh;
            padding: 0;
            position: relative;overflow-x: hidden;
    }
    
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
            radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
            radial-gradient(circle at 80% 80%, rgba(143, 211, 244, 0.3), transparent 50%);
        pointer-events: none;
        z-index: 0;
    }
    
        .container {
        max-width: 1000px;
        margin: 0 auto;
        position: relative;
        z-index: 1;max-width: 1200px;
            margin: 0 auto;
            padding: 60px 40px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); solid rgba(255, 255, 255, 0.3);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .container:hover {
        transform: translateY(-5px);
        box-shadow: 
            0 40px 120px rgba(0, 0, 0, 0.2),
            0 0 0 1px rgba(255, 255, 255, 0.5),
            inset 0 1px 0 rgba(255, 255, 255, 0.9);
    }
    
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    
        h1 {
        font-size: 3em;
        font-weight: 800;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 8px;
        letter-spacing: -0.02em;
        line-height: 1.2;
    }om: 10px;
    }
    
        .subtitle {
        color: #7c7c7c;
        font-size: 1.15em;
        font-weight: 400;
        margin-bottom: 10px;
    }
    
    .credit-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 30px;
        /* === Top Bar - User & Credits Section === */
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 20px;
        margin-bottom: 30px;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 15px;
        color: white;
        flex-wrap: wrap;
    }

    .user-section {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .user-email {
        font-size: 1em;
        font-weight: 500;
    }

    .credits-section {
        display: flex;
        align-items: center;
        gap: 15px;
        flex-wrap: wrap;
        margin-left: auto;
    }

    .credit-display {
        font-size: 1.1em;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        backdrop-filter: blur(10px);
    }

        .btn-auth {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        color: white !important;
        border: none;
        padding: 12px 24px;background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            color: white !important;
            border: none !important;
            padding: 14px 32px !important;
            border-radius: 12px !important;
            cursor: pointer !important;
            font-weight: 700 !important;
            font-size: 1em !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4) !important;
            text-transform: none !important;
            letter-spacing: 0.3px !important;
        }5px rgba(102, 126, 234, 0.6);
    }
        transition: all 0.2s;
    }

    .btn-auth:hover {
.btn-auth:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6) !important;
        }
    .logout-btn {
        padding: 8px 16px;
        background: rgba(255, 68, 68, 0.9);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.95em;
        font-weight: 500;
        transition: all 0.2s;
    }

    .logout-btn:hover {
        background: #ff4444;
        transform: scale(1.05);
    }
    
        .btn-buy-credits {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        font-size: 0.95em;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
    
    .btn-buy-credits:hover {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
    }
    
    .btn-buy-credits:hover {
      transform: scale(1.05);
    }
    
    .form-group {
      margin-bottom: 25px;
    }
    
        label {
        display: block;
        font-weight: 600;
        margin-bottom: 10px;
        color: #2d3748;
        font-size: 1.05em;
        letter-spacing: -0.01em;
    }
    }
    
input[type="text"],
        select,
        textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e8eaf0;
            border-radius: 12px;
            font-size: 1em;
            font-family: inherit;
            background: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }    }
    
    input[type="text"]:focus,
        select:focus,
        textarea:focus {
            outline: none !important;
            border-color: #667eea !important;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1), 0 4px 12px rgba(102, 126, 234, 0.15) !important;
            transform: none !important;
        }    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1), 0 4px 12px rgba(102, 126, 234, 0.15);
        transform: translateY(-1px);
    }
    
    textarea {
        resize: vertical;
        min-height: 100px;
    } transition: border-color 0.3s;
    }
    
    input[type="text"]:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #667eea;
    }
    
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn-generate {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 1.2em;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .btn-generate:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
    }
    
    .btn-generate:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .loading {
      text-align: center;
      padding: 20px;
      display: none;
    }
    
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .results {
      display: none;
      margin-top: 30px;
      padding: 30px;
      background: #f8f9fa;
      border-radius: 15px;
    }
    
    .results h2 {
      color: #333;
      margin-bottom: 20px;
      font-size: 1.8em;
    }
    
    .hashtags, .music {
      margin-bottom: 25px;
    }
    
    .hashtags h3, .music h3 {
      color: #667eea;
      margin-bottom: 15px;
      font-size: 1.3em;
    }
    
    .hashtag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .hashtag {
      background: white;
      padding: 8px 15px;
      border-radius: 20px;
      color: #667eea;
      font-weight: 500;
      border: 2px solid #667eea;
    }
    
    .music-track {
      background: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 10px;
      border-left: 4px solid #667eea;
    }
    
    .music-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }
    
    .music-artist {
      color: #666;
      font-size: 0.9em;
    }
    
    .virality-score {
      text-align: center;
      padding: 20px;
      background: white;
      border-radius: 15px;
      margin-top: 20px;
    }
    
    .score-value {
      font-size: 4em;
      font-weight: bold;
      color: #667eea;
    }
    
    .score-label {
      color: #666;
      margin-top: 10px;
    }

            /* Authentication Modal Styles */
            .auth-modal {
                          display: none;
                          position: fixed;
                          top: 0;
                          left: 0;
                          width: 100%;
                          height: 100%;
                          background: rgba(0, 0, 0, 0.7);
                          z-index: 1000;
                          justify-content: center;
                          align-items: center;
                      }

            .auth-modal.show {
                          display: flex;
                      }

            .auth-content {
                          background: white;
                          border-radius: 20px;
                          padding: 40px;
                          max-width: 400px;
                          width: 90%;
                          position: relative;
                      }

            .auth-tabs {
                          display: flex;
                          gap: 20px;
                          margin-bottom: 30px;
                      }

            .auth-tab {
                          flex: 1;
                          padding: 10px 20px;
                          background: #f0f0f0;
                          border: none;
                          border-radius: 10px;
                          cursor: pointer;
                          font-weight: 600;
                      }

            .auth-tab.active {
                          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                          color: white;
                      }

            .auth-form {
                          display: none;
                      }

            .auth-form.active {
                          display: block;
                      }

                .auth-input {
        width: 100%;
        padding: 14px 16px;
        margin-bottom: 16px;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        font-size: 15px;
        font-family: inherit;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-sizing: border-box;
        background: white;
    }
    
    .auth-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1), 0 4px 12px rgba(102, 126, 234, 0.15);
        transform: translateY(-1px);
    }

                .auth-submit {
        width: 100%;
        padding: 16px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .auth-submit:hover {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
    }
    
    .auth-submit:active {
        transform: translateY(0) scale(0.98);
    }
                      }

            .user-info {
                          display: none;
                          align-items: center;
                          gap: 15px;
                      }

            .user-info.show {
                          display: flex;
                      }

            .logout-btn {
                          padding: 8px 16px;
                          background: #ff4444;
                          color: white;
                          border: none;
                          border-radius: 8px;
                          cursor: pointer;
                          font-size: 14px;
                      }

    /* Pricing Modal */
.pricing-modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(5px);
}

.pricing-modal-content {
    background: white;
    margin: 3% auto;
    padding: 50px 40px;
    border-radius: 25px;
    max-width: 1000px;
    position: relative;
    box-shadow: 0 30px 80px rgba(102, 126, 234, 0.3);
}

.pricing-modal-content h2 {
    text-align: center;
    font-size: 2.5em;
    margin-bottom: 40px;
    color: #333;
}

.pricing-close {
    position: absolute;
    right: 25px;
    top: 25px;
    font-size: 35px;
    font-weight: bold;
    color: #999;
    cursor: pointer;
    transition: color 0.3s;
}

.pricing-close:hover {
    color: #667eea;
}

.pricing-plans {
    display: flex;
    gap: 25px;
    margin-top: 30px;
}

.plan-card {
    flex: 1;
    padding: 40px 30px;
    border: 2px solid #e0e0e0;
    border-radius: 20px;
    text-align: center;
    position: relative;
    transition: transform 0.3s, box-shadow 0.3s;
}

.plan-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
}

.plan-card.featured {
    border-color: #667eea;
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
    transform: scale(1.05);
    box-shadow: 0 20px 50px rgba(102, 126, 234, 0.25);
}

.badge {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 5px 20px;
    border-radius: 20px;
    font-size: 0.8em;
    font-weight: bold;
}

.plan-card h3 {
    font-size: 1.8em;
    color: #333;
    margin-bottom: 20px;
}

.plan-price {
    font-size: 3em;
    font-weight: bold;
    color: #667eea;
    margin: 20px 0;
}

.plan-price span {
    font-size: 0.4em;
    color: #999;
}

.plan-card p {
    color: #666;
    font-size: 1.1em;
    margin-bottom: 25px;
}

.plan-card ul {
    list-style: none;
    padding: 0;
    margin: 25px 0;
    text-align: left;
}

.plan-card ul li {
    padding: 10px 0;
    color: #555;
    font-size: 0.95em;
}

.plan-card button {
    width: 100%;
    padding: 18px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1.1em;
    margin-top: 25px;
    transition: transform 0.2s, box-shadow 0.2s;
}

.plan-card button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
}

@media (max-width: 768px) {
    .pricing-plans {
        flex-direction: column;
    }
    
    .plan-card.featured {
        transform: scale(1);
    }
}
  </style>
  
    <!-- Firebase SDK -->
      <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
      <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  
      <script>
                // Firebase configuration
                const firebaseConfig = {
                              apiKey: "AIzaSyClaxiy_YyFXzCHclP5jnxmYJkUTUDrtBU",
                              authDomain: "tiktok-viral-optimizer.firebaseapp.com",
                              projectId: "tiktok-viral-optimizer",
                              storageBucket: "tiktok-viral-optimizer.firebasestorage.app",
                              messagingSenderId: "282243849698",
                              appId: "1:282243849698:web:b9d15bd89f5decba4cadbb",
                              measurementId: "G-YDNTJTMW2Y"
                                        };
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);
                const auth = firebase.auth();
                const db = firebase.firestore();
            </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>üé¨ TikTok Viral Assistant</h1>
      <p class="subtitle">Generate</p>
    </header>

            <!-- User Authentication & Credits Section -->
        <div class="top-bar">
            <!-- Left: User Info -->
            <div class="user-section" id="userInfo" style="display: none;">
                <span class="user-email" id="userEmail"></span>
                <button class="logout-btn" onclick="handleLogout()">Logout</button>
            </div>
            
            <!-- Center/Right: Credits & Actions -->
            <div class="credits-section">
                <div class="credit-display">
                    üéüÔ∏è <strong>Credits:</strong> <strong id="creditCount">1</strong>
                </div>
                <button id="authBtn" class="btn-auth" onclick="showAuthModal()">Sign In / Sign Up</button>
                <button class="btn-buy-credits" id="buyCreditsBtn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 12px; cursor: pointer; font-weight: 700; font-size: 0.95em; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); text-transform: uppercase; letter-spacing: 0.5px;">üí≥ Buy More Credits</button>            </div>
        </div>
      <div class="form-group">

        <input type="text" id="videoUrl" placeholder="https://www.tiktok.com/@username/video/123456" required>
      </div>

        <label for="platform">üì± Platform</label>
        <select id="platform">
          <option value="tiktok">TikTok</option>
          <option value="instagram">Instagram</option>
        </select>
      </div>

      <div class="form-group">
        <label for="videoDesc">üìù Description of the Video</label>
        <textarea id="videoDesc" placeholder="Describe the content of your videoo..." required></textarea>
      </div>

      <div class="form-group">
        <label for="niche">üéØ Niche / Category</label>
        <select id="niche">
          <option value="food">üçî Food & Cooking</option>
          <option value="beauty">üíÑ Beauty & Cosmetics</option>
          <option value="tech">üì± Tech & Gadgets</option>
          <option value="fashion">üëó Fashion & Style</option>
          <option value="fitness">üí™ Fitness & Sports</option>
          <option value="lifestyle">‚ú® Lifestyle</option>
          <option value="ecommerce">üõí General E-commerce</option>
        </select>
      </div>

      <button type="submit" class="btn-generate" id="generateBtn">
        ‚ú® Generate Recommendations (1 credit)
      </button>
    </form>

    <div class="loading" id="loading">
      <div class="spinner"></div>
      <p>Analyzing with AI...</p>
    </div>

    <div class="results" id="results">
      <h2>üìä Analysis Results</h2>
      
      <div class="hashtags">
        <h3>üî• Trending Hashtags</h3>
        <div class="hashtag-list" id="trendingHashtags"></div>
      </div>

      <div class="hashtags">
        <h3>üéØ Niche Hashtags</h3>
        <div class="hashtag-list" id="nicheHashtags"></div>
      </div>

      <div class="music">
        <h3>üéµ Music Recommendations</h3>
        <div id="musicTracks"></div>
      </div>

      <div class="virality-score">
        <div class="score-value" id="scoreValue">0</div>
        <div class="score-label">Virality Score</div>
      </div>
    </div>
  </div>

  <script>
    const API_URL = 'https://video-style-cloner-backend-production.up.railway.app/test';


    const form = document.getElementById('videoForm');
    const loading = document.getElementById('loading');

    const generateBtn = document.getElementById('generateBtn');
    const creditCount = document.getElementById('creditCount');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();


      

      const videoUrl = document.getElementById('videoUrl').value;
      const platform = document.getElementById('platform').value;
      const videoDesc = document.getElementById('videoDesc').value;
      const niche = document.getElementById('niche').value;

      // Afficher le loading
      form.style.display = 'none';
      loading.style.display = 'block';
      results.style.display = 'none';

      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            video_url: videoUrl,
            platform: platform
          })
        });

        const data = await response.json();

        if (data.success) {
                          // Check if user is logged in
                const currentUser = auth.currentUser;
                if (!currentUser) {
                    alert('‚ùå Please sign in to use this feature!');
                    form.style.display = 'block';
                    loading.style.display = 'none';
                    return;
                }
                // Deduct credit and update Firestore
                const userRef = db.collection('users').doc(currentUser.uid);
                const userDoc = await userRef.get();
                const currentCredits = userDoc.data().credits || 0;
                
                if (currentCredits <= 0) {
                    alert('‚ùå No credits remaining! Please buy more credits.');
                    form.style.display = 'block';
                    loading.style.display = 'none';
                    return;
                }
                
                // Deduct 1 credit
                await userRef.update({
                    credits: firebase.firestore.FieldValue.increment(-1)
                });
                
                // Update UI
                creditCount.textContent = currentCredits - 1;
                
                // Save to history
                await userRef.update({
                    history: firebase.firestore.FieldValue.arrayUnion({
                        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                        videoUrl: videoUrl,
                        platform: platform,
                        niche: niche,
                        results: data.data
                    })
                

          // Afficher les r√©sultats
          displayResults(data.data);
        } else {
          throw new Error(data.error || 'Erreur inconnue');
        }
      } catch (error) {
        alert('‚ùå Erreur: ' + error.message);
      } finally {
        form.style.display = 'block';
        loading.style.display = 'none';
      }
    });

    function displayResults(data) {
      // Trending Hashtags
      const trendingContainer = document.getElementById('trendingHashtags');
      trendingContainer.innerHTML = '';
      if (data.trending_hashtags) {
        data.trending_hashtags.forEach(tag => {
          const span = document.createElement('span');
          span.className = 'hashtag';
          span.textContent = tag;
          trendingContainer.appendChild(span);
        });
      }

      // Niche Hashtags
      const nicheContainer = document.getElementById('nicheHashtags');
      nicheContainer.innerHTML = '';
      if (data.niche_hashtags) {
        data.niche_hashtags.forEach(tag => {
          const span = document.createElement('span');
          span.className = 'hashtag';
          span.textContent = tag;
          nicheContainer.appendChild(span);
        });
      }

      // Musique
      const musicContainer = document.getElementById('musicTracks');
      musicContainer.innerHTML = '';
      if (data.music_recommendations) {
        data.music_recommendations.forEach(track => {
          const div = document.createElement('div');
          div.className = 'music-track';
          div.innerHTML = `
            <div class="music-title">üéµ ${track.title}</div>
            <div class="music-artist">üë§ ${track.artist}</div>
          `;
          musicContainer.appendChild(div);
        });
      }

      // Virality Score
      const scoreElement = document.getElementById('scoreValue');
      if (data.virality_score) {
        scoreElement.textContent = data.virality_score;
      }

      // Afficher les r√©sultats
      results.style.display = 'block';
    }

    // Bouton acheter des cr√©dits
    document.getElementById('buyCreditsBtn').addEventListener('click', () => {
        document.getElementById('pricingModal').style.display = 'block';    });  </script>

      // Fermer le modal pricing
    document.addEventListener('DOMContentLoaded', () => {
        const modal = document.getElementById('pricingModal');
        const closeBtn = document.querySelector('.pricing-close');
        
        if (closeBtn) {
            closeBtn.addEventListener('click', () => {
                modal.style.display = 'none';
            });
        }
        
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
    });
        </script>

      <!-- Authentication Modal -->
      <div id="authModal" class="auth-modal">
                <div class="auth-modal-content">
                              <span class="auth-close">&times;</span>

                              <!-- Sign Up Form -->
                              <div id="signupForm" class="auth-form">
                                                <h2>Sign Up</h2>
                                                <input type="email" id="signupEmail" placeholder="Email" required>
                                                <input type="password" id="signupPassword" placeholder="Password" required>
                                                <button id="signupBtn" class="auth-btn">Sign Up</button>
                                                <p class="auth-switch">Already have an account? <a href="#" id="showLogin">Login</a></p>
                                            </div>

                              <!-- Login Form -->
                              <div id="loginForm" class="auth-form" style="display:none;">
                                                <h2>Login</h2>
                                                <input type="email" id="loginEmail" placeholder="Email" required>
                                                <input type="password" id="loginPassword" placeholder="Password" required>
                                                <button id="loginBtn" class="auth-btn">Login</button>
                                                <p class="auth-switch">Don't have an account? <a href="#" id="showSignup">Sign Up</a></p>
                                            </div>
                          </div>
            </div>

      <!-- Authentication JavaScript -->
      <script>
                // Modal elements
                const authModal = document.getElementById('authModal');
                const authBtn = document.getElementById('authBtn');
                const authClose = document.querySelector('.auth-close');
                const signupForm = document.getElementById('signupForm');
                const loginForm = document.getElementById('loginForm');
                const showLogin = document.getElementById('showLogin');
                const showSignup = document.getElementById('showSignup');
                const userInfo = document.getElementById('userInfo');
                const userEmail = document.getElementById('userEmail');
                const logoutBtn = document.querySelector('.logout-btn');
                const creditCount = document.getElementById('creditCount');

                // Show/hide modal
                function showAuthModal() {
                              authModal.style.display = 'flex';
                          }

                function hideAuthModal() {
                              authModal.style.display = 'none';
                          }

                // Switch between forms
                showLogin.addEventListener('click', (e) => {
                              e.preventDefault();
                              signupForm.style.display = 'none';
                              loginForm.style.display = 'block';
                          });

                showSignup.addEventListener('click', (e) => {
                              e.preventDefault();
                              loginForm.style.display = 'none';
                              signupForm.style.display = 'block';
                          });

                // Modal controls
                authBtn.addEventListener('click', showAuthModal);
                authClose.addEventListener('click', hideAuthModal);
                window.addEventListener('click', (e) => {
                              if (e.target === authModal) hideAuthModal();
                                        });

                // Firebase Authentication
                // Sign Up
                document.getElementById('signupBtn').addEventListener('click', async () => {
                              const email = document.getElementById('signupEmail').value;
                              const password = document.getElementById('signupPassword').value;
                              try {
                                                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                                                console.log('User signed up:', userCredential.user);
                                                hideAuthModal();
                                            } catch (error) {
                                                alert('Sign up error: ' + error.message);
                                            }
                                      // Create user profile in Firestore
                    await db.collection('users').doc(userCredential.user.uid).set({
                        email: email,
                        credits: 10, // Starting credits
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        history: []
                    });
                                        });

                // Login
                document.getElementById('loginBtn').addEventListener('click', async () => {
                              const email = document.getElementById('loginEmail').value;
                              const password = document.getElementById('loginPassword').value;
                              try {
                                                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                                                console.log('User logged in:', userCredential.user);
                                                hideAuthModal();
                                            } catch (error) {
                                                alert('Login error: ' + error.message);
                                            }
                                        });

                // Logout
                logoutBtn.addEventListener('click', async () => {
                              try {
                                                await auth.signOut();
                                                console.log('User logged out');
                                            } catch (error) {
                                                alert('Logout error: ' + error.message);
                                            }
                                        });

                // Auth state observer
                auth.onAuthStateChanged(async (user) => {
                              if (user) {
                                                // User is signed in
                                                userEmail.textContent = user.email;
                                                userInfo.style.display = 'flex';
                                                authBtn.style.display = 'none';
                                                // TODO: Fetch and display user credits from Firestore
                                                // Fetch and display user credits from Firestore
                const userDoc = await db.collection('users').doc(user.uid).get();
                if (userDoc.exists) {
                    const userData = userDoc.data();
                    creditCount.textContent = userData.credits || 0;
                } else {
                    // Create user document if it doesn't exist
                    await db.collection('users').doc(user.uid).set({
                        email: user.email,
                        credits: 10,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        history: []
                    });
                    creditCount.textContent = '10';
                }
                                                creditCount.textContent = '0'; // Placeholder
                                            } else {
                                                // User is signed out
                                                userInfo.style.display = 'none';

                                            }
                          });
            </script>

      <!-- Pricing Modal -->
    <div id="pricingModal" class="pricing-modal">
        <div class="pricing-modal-content">
            <span class="pricing-close">&times;</span>
            <h2>üéØ Choose Your Plan</h2>
            <div class="pricing-plans">
                <div class="plan-card">
                    <h3>Starter</h3>
                    <div class="plan-price">4,99 ‚Ç¨</div>
                    <p>1000 Credits</p>
                    <ul>
                        <li>‚úì Basic analysis</li>
                        <li>‚úì Trending hashtags</li>
                        <li>‚úì Support email</li>
                    </ul>
                    <button onclick="window.location.href='https://buy.stripe.com/test_4gM6oJ3V63tcdN7W50Jq00'">Starter</button>
                </div>
                <div class="plan-card featured">
                    <div class="badge"></div>
                    <h3>Pro</h3>
                    <div class="plan-price">9,99 ‚Ç¨<span>/mois</span></div>
                    <p>2000 Credits/month</p>
                    <ul>
                        <li>‚úì Advanced analysis</li>
                        <li>‚úì Hashtags premium</li>
                        <li>‚úì AI Music</li>
                        <li>‚úì Priority support</li>
                    </ul>
                    <button onclick="window.location.href='https://buy.stripe.com/test_fZU4gBaky77xb9J090Jq02'">Pro</button>
                </div>
                <div class="plan-card">
                    <h3>Business</h3>
                    <div class="plan-price">49,99 ‚Ç¨</div>
                    <p>15000 Credits</p>
                    <ul>
                        <li>‚úì Everything from Pro</li>
                        <li>‚úì API Access</li>
                        <li>‚úì Dedicated support</li>
                        <li>‚úì Advanced analytics</li>
                    </ul>
                    <button onclick="window.location.href='https://buy.stripe.com/test_28E8wRfESerz5Ppekt01Jq01'">Business</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

